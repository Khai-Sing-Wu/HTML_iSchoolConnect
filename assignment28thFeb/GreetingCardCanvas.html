<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Greeting Card using Canvas</title>
    <style>
    canvas{
        border: 1px solid darkslategray;
        display: block;
        margin: 0 auto;   
        color: white;
    }
    label{
            display: inline-block;
            width: 80px;
            padding: 5px;
    }
    button{
        margin-left: 94px;
    }
    </style>
    <script>
        //
        var can, ctx;
        var x0=0, y0=0, x1=500, y1=800;
        var bname, bage, bdate, count=1000;
        function getData(){
            bname = document.getElementById("bname").value;
            bdate = document.getElementById("bdate").value;

            dob = new Date(bdate);

            byear = dob.getFullYear();
            curr = new Date();
            currY= curr.getFullYear();
            bage = Math.abs(currY - byear);
            
            can = document.getElementById("canvas");
            ctx=canvas.getContext("2d");
            setInterval(launchCard,1500);
        }
       

        function launchCard()
        {
            var gradient = ctx.createLinearGradient(0,0, 500, 800);
            gradient.addColorStop(0,"blue");
            gradient.addColorStop(0.6,"purple");
            gradient.addColorStop(0.9,"black");
            ctx.fillStyle= gradient;
            ctx.fillRect(0,0,500,800);
            
            ctx.font="30px Comic Sans MS";
            var gradText = ctx.createLinearGradient(240, 100, 400, 580);
            count--;
            if(count%2 == 0){
                gradText.addColorStop("0", "red");
                gradText.addColorStop("0.5", "yellow");   
                gradText.addColorStop("1.0", "white");
                //adding stars
                ctx.beginPath();
                ctx.moveTo(100,50);
                ctx.lineTo(90,80);
                ctx.lineTo(50,90);
                ctx.lineTo(90,100);
                ctx.lineTo(100,140); 
                ctx.lineTo(110,100);
                ctx.lineTo(150,90);
                ctx.lineTo(110,80); 
                ctx.lineTo(100,50); 
                ctx.closePath();
                ctx.stroke();
                ctx.fillStyle="rgba(255,255,255,.5)";
                ctx.fill();

                ctx.beginPath();
                ctx.moveTo(100,450);
                ctx.lineTo(90,480);
                ctx.lineTo(50,490);
                ctx.lineTo(90,500);
                ctx.lineTo(100,540); 
                ctx.lineTo(110,500);
                ctx.lineTo(150,490);
                ctx.lineTo(110,480); 
                ctx.lineTo(100,450); 
                ctx.closePath();
                ctx.stroke();
                ctx.fillStyle="rgba(255,255,255,.5)";
                ctx.fill();

                ctx.beginPath();
                ctx.moveTo(400,50);
                ctx.lineTo(390,80);
                ctx.lineTo(350,90);
                ctx.lineTo(390,100);
                ctx.lineTo(400,140); 
                ctx.lineTo(410,100);
                ctx.lineTo(450,90);
                ctx.lineTo(410,80); 
                ctx.lineTo(400,50); 
                ctx.closePath();
                ctx.stroke();
                ctx.fillStyle="rgba(255,255,255,.5)";
                ctx.fill();

                ctx.beginPath();
                ctx.moveTo(400,450);
                ctx.lineTo(390,480);
                ctx.lineTo(350,490);
                ctx.lineTo(390,500);
                ctx.lineTo(400,540); 
                ctx.lineTo(410,500);
                ctx.lineTo(450,490);
                ctx.lineTo(410,480); 
                ctx.lineTo(400,450); 
                ctx.closePath();
                ctx.stroke();
                ctx.fillStyle="rgba(255,255,255,.5)";
                ctx.fill();
                }else{
                //making the stars blink
                ctx.beginPath();
                ctx.moveTo(100,50);
                ctx.lineTo(90,80);
                ctx.lineTo(50,90);
                ctx.lineTo(90,100);
                ctx.lineTo(100,140); 
                ctx.lineTo(110,100);
                ctx.lineTo(150,90);
                ctx.lineTo(110,80); 
                ctx.lineTo(100,50); 
                ctx.closePath();
                ctx.stroke();
                ctx.fillStyle="rgba(255,255,0,.5)";
                ctx.fill();
                ctx.beginPath();
                ctx.moveTo(100,450);
                ctx.lineTo(90,480);
                ctx.lineTo(50,490);
                ctx.lineTo(90,500);
                ctx.lineTo(100,540); 
                ctx.lineTo(110,500);
                ctx.lineTo(150,490);
                ctx.lineTo(110,480); 
                ctx.lineTo(100,450); 
                ctx.closePath();
                ctx.stroke();
                ctx.fillStyle="rgba(255,255,0,.5)";
                ctx.fill();
                
                ctx.beginPath();
                ctx.moveTo(400,50);
                ctx.lineTo(390,80);
                ctx.lineTo(350,90);
                ctx.lineTo(390,100);
                ctx.lineTo(400,140); 
                ctx.lineTo(410,100);
                ctx.lineTo(450,90);
                ctx.lineTo(410,80); 
                ctx.lineTo(400,50); 
                ctx.closePath();
                ctx.stroke();
                ctx.fillStyle="rgba(255,255,0,.5)";
                ctx.fill();

                ctx.beginPath();
                ctx.moveTo(400,450);
                ctx.lineTo(390,480);
                ctx.lineTo(350,490);
                ctx.lineTo(390,500);
                ctx.lineTo(400,540); 
                ctx.lineTo(410,500);
                ctx.lineTo(450,490);
                ctx.lineTo(410,480); 
                ctx.lineTo(400,450); 
                ctx.closePath();
                ctx.stroke();
                ctx.fillStyle="rgba(255,255,0,.5)";
                ctx.fill();


                gradText.addColorStop("0", "white");
                gradText.addColorStop("0.5", "yellow");   
                gradText.addColorStop("1.0", "red");
                
            }
            ctx.strokeStyle = gradText;
            ctx.textAlign = "center";
            ctx.strokeText("Wishing you",240,100);
            ctx.strokeText("a", 240, 180);
            ctx.strokeText("Happy Birthday", 240, 260);
            ctx.strokeText(bname,240,340);
            ctx.strokeText("on your",240,420);
            ctx.strokeText(bage + "th",240,500);
            ctx.strokeText("Birth Anniversary",240,580);
        }

    </script>
</head>
<body>
    <canvas id="canvas" width="500" height="800"></canvas>
    <main>
        <div>
            <label for="bname">Name</label>
            <input required name="name" id="bname"/>
        </div>
        <div>
            <label for="bdate">Birthday</label>
            <input required type="date" name="date" id="bdate"/>
        </div>

        <button onclick="getData()">Submit</button>
    </main>
</body>
</html>